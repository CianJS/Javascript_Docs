# 스코프

| 스코프    | 설명                           |
| ------ | ---------------------------- |
| 전역 스코프 | 코드의 모든 범위에서 사용할 수 있는 것을 말한다. |
| 지역 스코프 | 함수 내부에서만 사용할 수 있는 것을 말한다.    |

1. 전역 스코프

* 전역 스코프에 선언된 변수는 어디에서든지 참조할 수 있다.

2. 지역 스코프

* 지역 스코프는 함수 내부에서 선언된 변수를 말한다.
* 지역 스코프에 선언된 변수는 자신의 지역 스코프와 하위 지역 스코프에서만 참조할 수 있다.
* 만약 전역 변수 x가 선언되어있고 지역 스코프에서 x를 참조하면 에러가 발생하지 않고 전역 스코프에 선언되어있는 x를 참조하는데, 이는 자바스크립트 엔진이 스코프 체인을 통해 x를 찾기 때문이다.s

## 스코프 체인

* 스코프 체인은 스코프가 계층적으로 연결된 것을 말한다.
* 모든 지역 스코프의 최상위 스코프는 전역 스코프이다.
* 변수를 참조할 때 자바스크립트 엔진은 스코프 체인을 통해 상위 스코프 방향으로 이동하며 선언된 변수를 검색한다.
  * 이러한 특징으로 인해 상위 스코프에서 선언한 변수를 하위 스코프에서도 참조할 수 있다.

\| example

```js
var x = "global x";
var y = "global y";

function foo() {
  var x = "local";
  console.log(x); // local
  console.log(y); // global y
}

foo();
console.log(x); // global x
console.log(y); // global y
```

위 코드를 통해 스코프 체인을 통해 자바스크립트 엔진이 변수를 참조하는 방법을 알 수 있다.

1. 함수 foo()가 호출되며 변수 x를 가장 먼저 지역 스코프 내에서 찾는다. 있으므로 local을 출력한다.
2. 변수 y를 찾는다. 지역 스코프에 없으므로 상위 스코프인 전역 스코프에서 y를 찾는다. 있으므로 global y를 출력한다.
3. foo() 함수가 종료되면서 foo() 함수의 지역 스코프는 소멸한다.
4. 전역 스코프에서 x를 찾는다. 있으므로 global x를 출력한다.
5. 전역 스코프에서 y를 찾는다. 있으므로 global y를 출력한다.

## 렉시컬 스코프

* 렉시컬 스코프 또는 정적 스코프라고 부른다.
* 렉시컬 스코프는 함수를 어디서 호출하는지가 아니라 어디에 정의하였는지에 따라 결정된다.
  * 즉, 함수가 정의된 시점에 상위 스코프가 결정된다. 함수가 호출되는 위치는 상위 스코프 결정에 어떠한 영향도 주지 않는다.

```js
var x = 1;

function foo() {
  var x = 10;
  bar();
}

function bar() {
  console.log(x);
}

foo(); // 1
bar(); // 1
```
